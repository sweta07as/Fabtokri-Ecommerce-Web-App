{"version":3,"sources":["actions/orderAction.js","actions/cartAction.js","actions/couponAction.js","component/Cart/CheckoutSteps.js","component/Cart/ConfirmOrder.js"],"names":["createOrder","order","dispatch","a","type","CREATE_ORDER_REQUEST","config","headers","axios","post","data","CREATE_ORDER_SUCCESS","payload","CREATE_ORDER_FAIL","response","message","myOrders","MY_ORDERS_REQUEST","get","MY_ORDERS_SUCCESS","orders","MY_ORDERS_FAIL","getOrderDetails","id","ORDER_DETAILS_REQUEST","ORDER_DETAILS_SUCCESS","ORDER_DETAILS_FAIL","getAllOrders","ALL_ORDERS_REQUEST","ALL_ORDERS_SUCCESS","ALL_ORDERS_FAIL","updateOrder","UPDATE_ORDER_REQUEST","put","UPDATE_ORDER_SUCCESS","success","UPDATE_ORDER_FAIL","deleteOrder","DELETE_ORDER_REQUEST","delete","DELETE_ORDER_SUCCESS","DELETE_ORDER_FAIL","clearErrors","CLEAR_ERRORS","addItemsToCart","quantity","getState","ADD_TO_CART","product","_id","name","price","image","images","url","stock","localStorage","setItem","JSON","stringify","cart","cartItems","removeItemsFromCart","REMOVE_CART_ITEM","saveShippingInfo","SAVE_SHIPPING_INFO","applyCoupon","couponCode","APPLY_COUPON_REQUEST","APPLY_COUPON_SUCCESS","APPLY_COUPON_FAIL","console","log","getAdminCoupon","ADMIN_COUPON_REQUEST","ADMIN_COUPON_SUCCESS","coupons","ADMIN_COUPON_FAIL","getSingleCoupon","COUPON_DETAILS_REQUEST","COUPON_DETAILS_SUCCESS","coupon","COUPON_DETAILS_FAIL","createCoupon","couponData","NEW_COUPON_REQUEST","NEW_COUPON_SUCCESS","NEW_COUPON_FAIL","deleteCoupon","DELETE_COUPON_REQUEST","DELETE_COUPON_SUCCESS","DELETE_COUPON_FAIL","updateCoupon","UPDATE_COUPON_REQUEST","UPDATE_COUPON_SUCCESS","UPDATE_COUPON_FAIL","CheckoutSteps","activeStep","steps","label","icon","alternativeLabel","style","boxSizing","map","item","index","active","completed","color","ConfirmOrder","useSelector","state","shippingInfo","user","useDispatch","subtotal","reduce","acc","shippingCharges","useState","setCouponCode","appliedCoupon","setAppliedCoupon","discountAmount","setDiscountAmount","error","totalPrice","address","city","pinCode","country","handleCouponChange","e","target","value","applyCouponHandler","useEffect","discount","checkoutHandler","amount","userId","responseCode","responseUrl","transactionId","orderItems","itemsPrice","shippingPrice","paymentInfo","status","forEach","sessionStorage","window","location","href","title","className","phoneNo","email","src","alt","to","onClick","placeholder","onChange"],"mappings":"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","file":"static/js/15.281abc6c.chunk.js","sourcesContent":["import {\n  CREATE_ORDER_REQUEST,\n  CREATE_ORDER_FAIL,\n  CREATE_ORDER_SUCCESS,\n  MY_ORDERS_REQUEST,\n  MY_ORDERS_FAIL,\n  MY_ORDERS_SUCCESS,\n  ORDER_DETAILS_REQUEST,\n  ORDER_DETAILS_FAIL,\n  ORDER_DETAILS_SUCCESS,\n  ALL_ORDERS_REQUEST,\n  ALL_ORDERS_SUCCESS,\n  ALL_ORDERS_FAIL,\n  UPDATE_ORDER_REQUEST,\n  UPDATE_ORDER_SUCCESS,\n  UPDATE_ORDER_FAIL,\n  DELETE_ORDER_REQUEST,\n  DELETE_ORDER_SUCCESS,\n  DELETE_ORDER_FAIL,\n  CLEAR_ERRORS,\n} from \"../constants/orderConstants\";\n\nimport axios from \"axios\";\n\n//Create Order\nexport const createOrder = (order) => async (dispatch) => {\n  try {\n    dispatch({ type: CREATE_ORDER_REQUEST });\n\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    };\n    const { data } = await axios.post(\"/api/v1/order/new\", order, config);\n\n    dispatch({ type: CREATE_ORDER_SUCCESS, payload: data });\n\n  } catch (error) {\n    dispatch({\n      type: CREATE_ORDER_FAIL,\n      payload: error.response.data.message,\n    });\n  }\n};\n\n//My Orders\nexport const myOrders = () => async (dispatch) => {\n  try {\n    dispatch({ type: MY_ORDERS_REQUEST });\n\n    const { data } = await axios.get(\"/api/v1/orders\"); //earlier it was /orders/me\n\n    dispatch({ type: MY_ORDERS_SUCCESS, payload: data.orders });\n  } catch (error) {\n    dispatch({\n      type: MY_ORDERS_FAIL,\n      payload: error.response.data.message,\n    });\n  }\n};\n\n//Get Order Details\nexport const getOrderDetails = (id) => async (dispatch) => {\n  try {\n    dispatch({ type: ORDER_DETAILS_REQUEST });\n\n    const { data } = await axios.get(`/api/v1/order/${id}`);\n\n    dispatch({ type: ORDER_DETAILS_SUCCESS, payload: data.order });\n  } catch (error) {\n    dispatch({\n      type: ORDER_DETAILS_FAIL,\n      payload: error.response.data.message,\n    });\n  }\n};\n\n//Get All Orders --Admin\nexport const getAllOrders = () => async (dispatch) => {\n  try {\n    dispatch({ type: ALL_ORDERS_REQUEST });\n\n    const { data } = await axios.get(\"/api/v1/admin/orders\");\n\n    dispatch({ type: ALL_ORDERS_SUCCESS, payload: data.orders });\n  } catch (error) {\n    dispatch({\n      type: ALL_ORDERS_FAIL,\n      payload: error.response.data.message,\n    });\n  }\n};\n\n//Update Order\nexport const updateOrder = (id, order) => async (dispatch) => {\n  try {\n    dispatch({ type: UPDATE_ORDER_REQUEST });\n\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    };\n    const { data } = await axios.put(`/api/v1/admin/order/${id}`, order, config);\n\n    dispatch({ type: UPDATE_ORDER_SUCCESS, payload: data.success });\n  } catch (error) {\n    dispatch({\n      type: UPDATE_ORDER_FAIL,\n      payload: error.response.data.message,\n    });\n  }\n};\n\n//Delete Order\nexport const deleteOrder = (id) => async (dispatch) => {\n  try {\n    dispatch({ type: DELETE_ORDER_REQUEST });\n\n    const { data } = await axios.delete(`/api/v1/admin/order/${id}`);\n\n    dispatch({ type: DELETE_ORDER_SUCCESS, payload: data.success });\n  } catch (error) {\n    dispatch({\n      type: DELETE_ORDER_FAIL,\n      payload: error.response.data.message,\n    });\n  }\n};\n\n//Clearing Errors\nexport const clearErrors = () => async (dispatch) => {\n  dispatch({ type: CLEAR_ERRORS });\n};\n","import {\n  ADD_TO_CART,\n  REMOVE_CART_ITEM,\n  SAVE_SHIPPING_INFO,\n} from \"../constants/cartConstants\";\nimport axios from \"axios\";\n\n//Add to Cart\nexport const addItemsToCart = (id, quantity) => async (dispatch, getState) => {\n  const { data } = await axios.get(`/api/v1/product/${id}`);\n\n  dispatch({\n    type: ADD_TO_CART,\n    payload: {\n      product: data.product._id,\n      name: data.product.name,\n      price: data.product.price,\n      image: data.product.images[0].url,\n      stock: data.product.stock,\n      quantity,\n    },\n  });\n  if (typeof localStorage !== 'undefined') {\n    // Access the localStorage object or execute code that depends on it\n    localStorage.setItem(\"cartItems\", JSON.stringify(getState().cart.cartItems));\n  }\n};\n\n//REMOVE FROM CART\nexport const removeItemsFromCart = (id) => async (dispatch, getState) => {\n  dispatch({\n    type: REMOVE_CART_ITEM,\n    payload: id,\n  });\n  if (typeof localStorage !== 'undefined') {\n    // Access the localStorage object or execute code that depends on it\n    localStorage.setItem(\"cartItems\", JSON.stringify(getState().cart.cartItems));\n  }\n};\n\n//SAVE SHIIPPING INFO\nexport const saveShippingInfo = (data) => async (dispatch, getState) => {\n  dispatch({\n    type: SAVE_SHIPPING_INFO,\n    payload: data,\n  });\n  if (typeof localStorage !== 'undefined') {\n    // Access the localStorage object or execute code that depends on it\n    localStorage.setItem(\"shippingInfo\", JSON.stringify(data));\n  }\n};\n\n","import axios from \"axios\";\n\nimport {\n  ADMIN_COUPON_REQUEST,\n  ADMIN_COUPON_SUCCESS,\n  ADMIN_COUPON_FAIL,\n  COUPON_DETAILS_REQUEST,\n  COUPON_DETAILS_SUCCESS,\n  COUPON_DETAILS_FAIL,\n  NEW_COUPON_REQUEST,\n  NEW_COUPON_SUCCESS,\n  NEW_COUPON_FAIL,\n  DELETE_COUPON_REQUEST,\n  DELETE_COUPON_SUCCESS,\n  DELETE_COUPON_FAIL,\n  UPDATE_COUPON_REQUEST,\n  UPDATE_COUPON_SUCCESS,\n  UPDATE_COUPON_FAIL,\n  APPLY_COUPON_REQUEST,\n  APPLY_COUPON_SUCCESS,\n  APPLY_COUPON_FAIL,\n  CLEAR_ERRORS,\n} from \"../constants/couponConstants\";\n\n//Apply Coupon\nexport const applyCoupon = (couponCode) => async (dispatch) => {\n  try {\n    dispatch({ type: APPLY_COUPON_REQUEST });\n\n    const { data } = await axios.post(\"/api/v1/coupons/apply\", { couponCode });\n\n    dispatch({\n      type: APPLY_COUPON_SUCCESS,\n      payload: data,\n    });\n  } catch (error) {\n    dispatch({\n      type: APPLY_COUPON_FAIL,\n      payload: error.response.data.message,\n    });\n\n    console.log(\"Coupon application error:\", error.response.data.message);\n  }\n};\n\n//Get All Coupons --Admin\nexport const getAdminCoupon = () => async (dispatch) => {\n  try {\n    dispatch({ type: ADMIN_COUPON_REQUEST });\n\n    const { data } = await axios.get(\"/api/v1/admin/coupons\");\n\n    dispatch({\n      type: ADMIN_COUPON_SUCCESS,\n      payload: data.coupons,\n    });\n  } catch (error) {\n    dispatch({\n      type: ADMIN_COUPON_FAIL,\n      payload: error.response.data.message,\n    });\n  }\n};\n\n//Get Coupon Details\nexport const getSingleCoupon = (id) => async (dispatch) => {\n  try {\n    dispatch({\n      type: COUPON_DETAILS_REQUEST,\n    });\n\n    const { data } = await axios.get(`/api/v1/coupon/${id}`);\n\n    dispatch({\n      type: COUPON_DETAILS_SUCCESS,\n      payload: data.coupon,\n    });\n  } catch (error) {\n    dispatch({\n      type: COUPON_DETAILS_FAIL,\n      payload: error.response.data.message,\n    });\n  }\n};\n\n//Create Coupon\nexport const createCoupon = (couponData) => async (dispatch) => {\n  try {\n    dispatch({\n      type: NEW_COUPON_REQUEST,\n    });\n\n    const config = {\n      headers: { \"Content-Type\": \"application/json\" },\n    };\n    const { data } = await axios.post(\n      `/api/v1/admin/coupon/new`,\n      couponData,\n      config\n    );\n\n    dispatch({\n      type: NEW_COUPON_SUCCESS,\n      payload: data,\n    });\n  } catch (error) {\n    dispatch({\n      type: NEW_COUPON_FAIL,\n      payload: error.response.data.message,\n    });\n  }\n};\n\n//Delete Coupon\nexport const deleteCoupon = (id) => async (dispatch) => {\n  try {\n    dispatch({ type: DELETE_COUPON_REQUEST });\n\n    const { data } = await axios.delete(`/api/v1/admin/coupon/${id}`);\n\n    dispatch({\n      type: DELETE_COUPON_SUCCESS,\n      payload: data.success,\n    });\n  } catch (error) {\n    dispatch({\n      type: DELETE_COUPON_FAIL,\n      payload: error.response.data.message,\n    });\n  }\n};\n\n//Update Coupon\nexport const updateCoupon = (id, couponData) => async (dispatch) => {\n  try {\n    dispatch({\n      type: UPDATE_COUPON_REQUEST,\n    });\n\n    const config = {\n      headers: { \"Content-Type\": \"application/json\" },\n    };\n    const { data } = await axios.put(\n      `/api/v1/admin/coupon/${id}`,\n      couponData,\n      config\n    );\n\n    dispatch({\n      type: UPDATE_COUPON_SUCCESS,\n      payload: data.success,\n    });\n  } catch (error) {\n    dispatch({\n      type: UPDATE_COUPON_FAIL,\n      payload: error.response.data.message,\n    });\n  }\n};\n\n\n//Clearing Errors\nexport const clearErrors = () => async (dispatch) => {\n  dispatch({ type: CLEAR_ERRORS });\n};\n","import React, { Fragment } from \"react\";\nimport { Typography, Stepper, StepLabel, Step } from \"@material-ui/core\";\nimport LocalShippingIcon from \"@material-ui/icons/LocalShipping\";\nimport LibraryAddCheckIcon from \"@material-ui/icons/LibraryAddCheck\";\nimport AccountBalanceIcon from \"@material-ui/icons/AccountBalance\";\nimport \"./CheckoutSteps.css\";\n\nconst CheckoutSteps = ({ activeStep }) => {\n  const steps = [\n    {\n      label: <Typography>Shipping Details</Typography>,\n      icon: <LocalShippingIcon />,\n    },\n    {\n      label: <Typography>Confirm Order</Typography>,\n      icon: <LibraryAddCheckIcon />,\n    },\n    {\n      label: <Typography>Payment</Typography>,\n      icon: <AccountBalanceIcon />,\n    },\n  ];\n\n  const stepStyles = {\n    boxSizing: \"border-box\",\n  };\n\n  return (\n    <Fragment>\n      <Stepper alternativeLabel activeStep={activeStep} style={stepStyles}>\n        {steps.map((item, index) => (\n          <Step\n            key={index}\n            active={activeStep === index ? true : false}\n            completed={activeStep >= index ? true : false}\n          >\n            <StepLabel\n              style={{\n                color:\n                  activeStep >= index\n                    ? \"rgb(128, 0, 57)\"\n                    : \"rgba(0, 0, 0, 0.649)\",\n              }}\n              icon={item.icon}\n            >\n              {item.label}\n            </StepLabel>\n          </Step>\n        ))}\n      </Stepper>\n    </Fragment>\n  );\n};\n\nexport default CheckoutSteps;\n","import React, { Fragment, useState, useEffect } from \"react\";\nimport CheckoutSteps from \"../Cart/CheckoutSteps\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport MetaData from \"../layout/Metadata\";\nimport \"./ConfirmOrder.css\";\nimport { Link } from \"react-router-dom\";\nimport { Typography } from \"@material-ui/core\";\nimport axios from \"axios\";\n// import { useAlert } from \"react-alert\";\n// import Logo from \"../../images/android-chrome-192x192.png\";\n\nimport { applyCoupon } from \"../../actions/couponAction\";\n// import { APPLY_COUPON_SUCCESS } from \"../../constants/couponConstants\";\n\n// import { removeItemsFromCart } from \"../../actions/orderAction.js\";\n\nimport { removeItemsFromCart } from \"../../actions/cartAction\";\n\nimport { createOrder } from \"../../actions/orderAction.js\";\n\nconst ConfirmOrder = () => {\n  const { shippingInfo, cartItems } = useSelector((state) => state.cart);\n  const { user } = useSelector((state) => state.user);\n  const dispatch = useDispatch();\n  // const alert = useAlert();\n\n  const subtotal = cartItems.reduce(\n    (acc, item) => acc + item.quantity * item.price,\n    0\n  );\n  const shippingCharges = subtotal > 1000 ? 0 : 1; //change back to 0 : 200\n  // const tax = subtotal * 0.18;\n\n  const [couponCode, setCouponCode] = useState(\"\");\n  const [appliedCoupon, setAppliedCoupon] = useState(null);\n  const [discountAmount, setDiscountAmount] = useState(0);\n  const { success, coupon, error } = useSelector((state) => state.applyCoupon);\n\n  const totalPrice = shippingCharges + subtotal - discountAmount;\n  const address = `${shippingInfo.address}, ${shippingInfo.city}, ${shippingInfo.state}, ${shippingInfo.pinCode}, ${shippingInfo.country}`;\n\n  const handleCouponChange = (e) => {\n    setCouponCode(e.target.value);\n  };\n\n  const applyCouponHandler = async () => {\n    setAppliedCoupon(couponCode);\n    await dispatch(applyCoupon(couponCode));\n\n    if (error) {\n      setDiscountAmount(0);\n      // alert.error(\"Invalid Coupon\");\n    }\n  };\n\n  const removeCouponHandler = () => {\n    setDiscountAmount(0);\n    if (appliedCoupon && success) {\n      setAppliedCoupon(null);\n      dispatch(applyCoupon(\"\"));\n    }\n  };\n\n  useEffect(() => {\n    if (success) {\n      setDiscountAmount((subtotal * coupon.coupon.discount) / 100);\n    }\n  }, [success, coupon, subtotal]);\n\n  const checkoutHandler = async (amount, userId) => {\n    // const {\n    //   data: { key },\n    // } = await axios.get(\"/api/v1/getkey\");\n\n    //RAZORPAY\n\n    const {\n      data: { responseCode, responseUrl, transactionId },\n    } = await axios.post(\"/api/v1/checkout\", {\n      amount,\n      userId,\n    });\n\n\n    //creating order before payment\n    const order = {\n      shippingInfo,\n      orderItems: cartItems,\n      itemsPrice: subtotal,\n      shippingPrice: shippingCharges,\n      totalPrice: totalPrice,\n      paymentInfo: {\n        id: transactionId,\n        status: \"initiated\",\n      },\n    };\n\n    cartItems.forEach((item) => {\n      dispatch(removeItemsFromCart(item.product));\n    });\n\n    dispatch(createOrder(order));\n\n\n    //RAZORPAY\n\n    // const options = {\n    //   key,\n    //   amount: order.amount,\n    //   currency: \"INR\",\n    //   name: \"FabTokri\",\n    //   description: \"Ecommerce Website\",\n    //   image: Logo,\n    //   order_id: order.id,\n    //   callback_url: \"http://localhost:4000/api/v1/paymentverification\",\n    //   // callback_url: \"http://15.206.67.237/api/v1/paymentverification\",\n    //   // callback_url: `${window.location.origin}/api/v1/paymentverification`,\n\n    //   prefill: {\n    //     name: user.name,\n    //     email: user.email,\n    //     contact: shippingInfo.phoneNo,\n    //   },\n    //   notes: {\n    //     address: \"Razorpay Corporate Office\",\n    //   },\n    //   theme: {\n    //     color: \"#800039\",\n    //   },\n    // };\n\n    // const razor = new window.Razorpay(options);\n    // razor.open();\n\n    // const data = {\n    //   subtotal,\n    //   shippingCharges,\n    //   // tax,\n    //   totalPrice,\n    //   transactionId,\n    // };\n\n    const data = {\n      transactionId\n    };\n\n    sessionStorage.setItem(\"orderInfo\", JSON.stringify(data));\n\n    if (responseCode === \"PAYMENT_INITIATED\") {\n      // Redirect the user to the PhonePe payment page\n      window.location.href = responseUrl;\n    }\n  };\n\n  return (\n    <Fragment>\n      <MetaData title=\"Confirm Order\" />\n      <CheckoutSteps activeStep={1} />\n      <div className=\"confirmOrderPage\">\n        <div>\n          <div className=\"confirmshippingArea\">\n            <Typography>Shipping Info</Typography>\n            <div className=\"confirmshippingAreaBox\">\n              <div>\n                <p>Name:</p>\n                <span>{user.name}</span>\n              </div>\n              <div>\n                <p>Phone:</p>\n                <span>{shippingInfo.phoneNo}</span>\n              </div>\n              <div>\n                <p>Email:</p>\n                <span>{user.email}</span>\n              </div>\n              <div>\n                <p>Address:</p>\n                <span>{address}</span>\n              </div>\n            </div>\n          </div>\n          <div className=\"confirmCartItems\">\n            <Typography>Your Cart Items:</Typography>\n            <div className=\"confirmCartItemsContainer\">\n              {cartItems &&\n                cartItems.map((item) => (\n                  <div key={item.product}>\n                    <img src={item.image} alt=\"Product\" />\n                    <Link to={`/product/${item.product}`}>{item.name}</Link>\n                    <span>\n                      {item.quantity} X {item.price} ={\" \"}\n                      <b>₹{item.price * item.quantity}</b>\n                    </span>\n                  </div>\n                ))}\n            </div>\n          </div>\n        </div>\n        {/*  */}\n        <div>\n          <div className=\"orderSummary\">\n            <Typography>Order Summary</Typography>\n            <div>\n              <div>\n                <p>Subtotal:</p>\n                <span>₹{subtotal}</span>\n              </div>\n              {appliedCoupon && success && !error && (\n                <div className=\"discountSection\">\n                  <p>Discount:</p>\n                  <span>{appliedCoupon}</span>\n                  <button\n                    className=\"removeButton\"\n                    onClick={removeCouponHandler}\n                  >\n                    Remove\n                  </button>\n                  <span>- ₹{discountAmount}</span>\n                </div>\n              )}\n\n              {error && (\n                <div>\n                  <p>Discount:</p>\n                  <span>- ₹{discountAmount}</span>\n                </div>\n              )}\n\n              <div>\n                <p>Shipping Charges:</p>\n                <span>₹{shippingCharges}</span>\n              </div>\n              {/* <div>\n                <p>GST:</p>\n                <span>₹{tax}</span>\n              </div> */}\n            </div>\n\n            <div className=\"orderSummaryTotal\">\n              <p>\n                <b>Total:</b>\n              </p>\n              <span>₹{totalPrice}</span>\n            </div>\n\n            {!appliedCoupon && !error && (\n              <div className=\"couponInput\">\n                <input\n                  type=\"text\"\n                  placeholder=\"Enter coupon code\"\n                  className=\"couponInputField\"\n                  onChange={handleCouponChange}\n                />\n                <button\n                  className=\"applyCouponButton\"\n                  onClick={applyCouponHandler}\n                >\n                  APPLY\n                </button>\n              </div>\n            )}\n\n            {error && (\n              <div className=\"couponInput\">\n                <input\n                  type=\"text\"\n                  placeholder=\"Enter coupon code\"\n                  className=\"couponInputField\"\n                  onChange={handleCouponChange}\n                />\n                <button\n                  className=\"applyCouponButton\"\n                  onClick={applyCouponHandler}\n                >\n                  APPLY\n                </button>\n              </div>\n            )}\n\n            <button onClick={() => checkoutHandler(totalPrice, user.id)}>\n              Proceed To Payment\n            </button>\n          </div>\n        </div>\n      </div>\n    </Fragment>\n  );\n};\n\nexport default ConfirmOrder;\n"],"sourceRoot":""}